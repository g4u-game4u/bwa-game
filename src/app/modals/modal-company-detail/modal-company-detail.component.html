<c4u-modal [modalTitle]="company.name || ''" *ngIf="company" (closed)="onModalClosed()">
  <!-- KPI Header Section - Figma Design -->
  <div class="kpi-header">
    <div class="kpi-item" *ngFor="let kpi of getCompanyKPIs(); let i = index">
      <c4u-kpi-circular-progress
        [label]="kpi.label"
        [current]="kpi.current"
        [target]="kpi.target"
        [superTarget]="kpi.superTarget"
        [color]="kpi.color"
        [unit]="kpi.unit"
        [colorIndex]="i"
      ></c4u-kpi-circular-progress>
    </div>
  </div>

  <!-- Tab Navigation - Figma Design -->
  <div class="tabs-container">
    <div 
      class="tab-item" 
      [class.active]="selectedTab === 0"
      (click)="selectTab(0)"
      role="tab"
      [attr.aria-selected]="selectedTab === 0"
      tabindex="0"
      (keydown.enter)="selectTab(0)">
      <i class="ri-checkbox-multiple-line tab-icon"></i>
      <span class="tab-label">Macros incompletas</span>
    </div>
    <div 
      class="tab-item" 
      [class.active]="selectedTab === 1"
      (click)="selectTab(1)"
      role="tab"
      [attr.aria-selected]="selectedTab === 1"
      tabindex="0"
      (keydown.enter)="selectTab(1)">
      <i class="ri-checkbox-circle-line tab-icon"></i>
      <span class="tab-label">Atividades finalizadas</span>
    </div>
    <div 
      class="tab-item" 
      [class.active]="selectedTab === 2"
      (click)="selectTab(2)"
      role="tab"
      [attr.aria-selected]="selectedTab === 2"
      tabindex="0"
      (keydown.enter)="selectTab(2)">
      <i class="ri-star-line tab-icon"></i>
      <span class="tab-label">Macros finalizadas</span>
    </div>
  </div>

  <!-- Content Area -->
  <div class="modal-content">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
      <c4u-spinner></c4u-spinner>
    </div>

    <!-- Tab Description -->
    <div *ngIf="!isLoading" class="tab-description">
      <p>{{ getTabDescription() }}</p>
    </div>

    <!-- Process Accordion -->
    <div *ngIf="!isLoading && currentTabProcesses.length > 0" class="process-list">
      <c4u-process-accordion [processes]="currentTabProcesses"></c4u-process-accordion>
    </div>

    <!-- Empty State -->
    <div 
      *ngIf="!isLoading && currentTabProcesses.length === 0" 
      class="empty-state">
      <p>Nenhum item encontrado para esta categoria</p>
    </div>
  </div>
</c4u-modal>
